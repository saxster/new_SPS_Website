# Core Configuration
database:
  path: ".agent/content_brain.db"
  backup_path: ".agent/content_brain_backup.db"

# LLM Configuration
llm:
  model: "gemini-3-pro-preview"
  temperature: 0.7
  max_retries: 3
  timeout: 60

# News Mining Configuration
news_miner:
  sources:
    - "https://news.google.com/rss/search?q=physical+security+india+when:1d&hl=en-IN&gl=IN&ceid=IN:en"
    - "https://news.google.com/rss/search?q=cyber+security+breach+india+when:1d&hl=en-IN&gl=IN&ceid=IN:en"
    - "https://news.google.com/rss/search?q=fire+incident+commercial+building+india+when:1d&hl=en-IN&gl=IN&ceid=IN:en"
    - "https://news.google.com/rss/search?q=crime+homicide+robbery+india+when:1d&hl=en-IN&gl=IN&ceid=IN:en"
    - "https://news.google.com/rss/search?q=terrorism+insurgency+bombing+india+when:1d&hl=en-IN&gl=IN&ceid=IN:en"
    - "https://news.google.com/rss/search?q=disaster+accident+fatality+india+when:1d&hl=en-IN&gl=IN&ceid=IN:en"
    - "https://feeds.feedburner.com/TheHackersNews"
  keywords:
    - "crime"
    - "war"
    - "terrorism"
    - "accident"
    - "deaths"
    - "homicide"
    - "assault"
    - "robbery"
    - "conflict"
    - "battle"
    - "insurgency"
    - "bombing"
    - "disaster"
    - "fatality"
    - "casualty"
    - "breach"
    - "attack"
    - "fire"
    - "protest"
    - "security"
    - "surveillance"
    - "police"
    - "CCTV"
    - "access control"
  incident_db_path: "website/src/assets/incidents_data.json"
  geocode_enabled: true
  geocode_user_agent: "SPS-Newsroom/1.0 (contact: ops@spssecurity)"
  geocode_rate_limit_seconds: 1.2

# Research Retrieval Configuration
research:
  request_timeout: 15
  max_sources: 12
  crossref_mailto: ""
  allowed_domains: []
  domain_weights:
    who.int: 30
    worldbank.org: 25
    un.org: 20
    rbi.org.in: 30
    mospi.gov.in: 25
    niti.gov.in: 20
    ncrb.gov.in: 30
    bis.gov.in: 25
  min_quality: 60
  cache_path: ".agent/evidence_cache.json"
  rss_feeds:
    - "https://news.google.com/rss/search?q=physical+security+india&hl=en-IN&gl=IN&ceid=IN:en"
    - "https://news.google.com/rss/search?q=cyber+security+india&hl=en-IN&gl=IN&ceid=IN:en"

# Fact-check consensus gate
fact_check:
  consensus_min: 85

# Citation validation rules
citation:
  min_per_paragraph: 1
  min_words_per_paragraph: 40
  recency_days: 365
  recency_types: ["News"]
  recency_by_type:
    News: 180
    Analysis: 365
    Guide: 540
  require_sources_section: true
  require_numeric_citations: true
  max_ngram_words: 12
  regulation_primary_domains:
    - "egazette.nic.in"
    - "mca.gov.in"
    - "rbi.org.in"
    - "bis.gov.in"
    - "ncrb.gov.in"
    - "mospi.gov.in"
  paraphrase_similarity_threshold: 0.88

# Claim ledger rules
claims:
  require_citations: true
  require_multi_source_numeric: true
  min_sources_numeric: 2
  min_domains_numeric: 2
  min_sources_regulation: 1
  max_claims: 120

# Publish policy thresholds
publish_policy:
  min_quality: 75
  min_citation_density: 0.6
  min_sources: 3
  block_on_claim_issues: true
  block_on_contradictions: true
  block_on_citation_issues: true

# Update watcher
updates:
  report_path: "reports/update_watch.json"
  queue_dir: "drafts/refresh_needed"
  queue_on_flag: true
  max_age_days: 365
  max_age_days_by_type:
    News: 90
    Analysis: 365
    Guide: 540

# Topic proposal de-duplication
topic_dedup:
  similarity_threshold: 0.82

# Newsroom metrics
newsroom:
  metrics_path: "reports/pipeline_metrics.json"
  metrics_history: 200

# Editorial Standards & Content Specs
content_specs:
  Guide:
    min_words: 1500
    min_sections: 5
    min_sources: 5
    min_regulations: 2
  Analysis:
    min_words: 2000
    min_sections: 6
    min_sources: 8
    min_regulations: 2
  News:
    min_words: 600
    min_sections: 4
    min_sources: 3
    min_regulations: 1
  Review:
    min_words: 1200
    min_sections: 4
    min_sources: 4
    min_regulations: 1
  General:
    min_words: 1000
    min_sections: 4
    min_sources: 3
    min_regulations: 1

# Paths
paths:
  drafts_dir: "drafts"
  rules_dir: ".agent/rules"
  website_content_dir: "website/src/content/blog"
  output_dir: "website/src/content/blog"

# =============================================================================
# Multi-Source Content Intelligence Configuration
# =============================================================================

# Pluggable miners for evidence gathering
miners:
  enabled: true
  youtube:
    enabled: true   # Now available: youtube-transcript-api installed
    rate_limit_delay: 2.0
  article:
    enabled: true   # Now available: trafilatura installed
  paper:
    enabled: true   # arXiv API - always available, no deps required

# Trust layer - enforces "No Single Point of Truth" principle
trust:
  block_on_low_confidence: true
  min_confidence_score: 5.0
  require_multi_source_for_numeric: true
  min_sources_per_claim: 2
  warn_on_single_source: true

# =============================================================================
# TopicProposer: The Editorial Brain
# =============================================================================

topic_proposer:
  enabled: true
  discovery_interval_hours: 6
  max_proposals_per_run: 10
  auto_queue_threshold: 0.8    # Auto-queue if score > 0.8
  require_approval_below: 0.6  # Human review if score < 0.6
  
  # Multi-factor scoring weights (must sum to 1.0)
  scoring:
    timeliness: 0.25        # How recent/urgent
    demand: 0.25            # Search demand
    coverage_gap: 0.20      # Have we covered this?
    source_availability: 0.15  # Can we find sources?
    brand_fit: 0.15         # Matches our focus?
  
  # Editorial focus areas
  focus_sectors:
    - physical_security
    - cybersecurity
    - fire_safety
    - compliance
    - risk_management
  
  # Target content mix
  content_mix:
    News: 0.4
    Guide: 0.35
    Analysis: 0.25

# =============================================================================
# Autonomous Runner: The Autopoietic Loop
# =============================================================================

autonomous:
  enabled: true
  interval_minutes: 60              # Time between discovery cycles
  max_articles_per_cycle: 3         # Max articles to write per cycle
  reflection_interval_hours: 24     # How often to reflect on performance
  memory_path: ".agent/taste_memory.db"
  
  # Learning parameters
  learning_rate: 0.1                # How fast to adjust weights
  exploration_rate: 0.2             # Try random topics 20% of time
  max_weight_multiplier: 2.0        # Max boost for successful patterns
  min_weight_multiplier: 0.5        # Max penalty for failures
  
  # Quality thresholds for learning
  boost_on_quality_above: 75        # Boost weight if quality > 75
  penalize_on_quality_below: 50     # Penalize if quality < 50

# =============================================================================
# Editorial Validation: Adversarial Topic Vetting
# =============================================================================

editorial:
  enabled: true
  
  # Gatekeeper: Fast rule-based filtering (ConsensusEngine)
  gatekeeper:
    enabled: true
    min_score: 50  # Reject topics scoring below this threshold
  
  # LLM Consensus: Multi-model voting (expensive, opt-in)
  consensus:
    enabled: false  # Off by default - each validation costs API calls
    tier: "spot"    # spot (fast/cheap), standard (2 models), full (all 3)
    min_level: "high"  # authoritative, high, disputed, untrusted
  
  # Red-Team: Adversarial challenge (why might this topic be bad?)
  red_team:
    enabled: true

# =============================================================================
# Premium Sources: Authoritative Journalism for Taste Development
# =============================================================================

premium_sources:
  enabled: true
  vault_path: ".agent/credential_vault.db"
  anchors_path: ".agent/taste_anchors.db"
  cookies_dir: ".agent/cookies"
  
  # Sync settings
  sync_interval_hours: 24
  max_articles_per_source: 50
  human_speed_delay_seconds: 30  # Delay between article fetches
  
  # Pre-configured sources (add credentials via admin panel)
  default_sources:
    - id: "economist"
      name: "The Economist"
      base_url: "https://www.economist.com"
      credibility_weight: 10
    - id: "asis"
      name: "ASIS Security Management"
      base_url: "https://www.asisonline.org"
      credibility_weight: 9
    - id: "vox"
      name: "Vox"
      base_url: "https://www.vox.com"
      credibility_weight: 8
    - id: "time"
      name: "Time"
      base_url: "https://time.com"
      credibility_weight: 8

# =============================================================================
# Admin Panel
# =============================================================================

admin:
  port: 8080
  # Auth token from environment: ADMIN_TOKEN


