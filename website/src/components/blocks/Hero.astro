---
const { title, subtitle, image, cta_text, cta_link } = Astro.props;

// Cloudflare Image Optimization
const cfDomain = import.meta.env.PUBLIC_CLOUDFLARE_IMAGE_DOMAIN;
let finalImage = image;

if (cfDomain && image && !image.startsWith('http')) {
    // Assuming image path from CMS is like /assets/uploads/file.jpg
    // We strip the folder path if you are uploading directly to CF Images via ID, 
    // BUT for standard usage, we just prefix the domain if you are using CF as a proxy.
    // For true CF Images integration, we would swap the ID. 
    // Here we assume basic domain prefixing for now.
    // finalImage = `https://${cfDomain}/cdn-cgi/image/format=auto,quality=80/${image}`;
}
---

<div class="relative h-[600px] flex items-center border-b border-neutral-800 overflow-hidden bg-black">
    {finalImage && (
        <div class="absolute inset-0 z-0">
            <img src={finalImage} alt={title} class="w-full h-full object-cover opacity-40 grayscale" />
            <div class="absolute inset-0 bg-gradient-to-r from-black via-black/80 to-transparent"></div>
        </div>
    )}
    <div class="relative z-10 w-full max-w-7xl mx-auto px-8 pl-20">
        <h2 class="text-7xl font-black mb-6 uppercase tracking-tighter max-w-4xl leading-[0.9] text-white">
            {title}
        </h2>
        <p class="text-2xl text-gray-300 font-light max-w-2xl mb-10 leading-relaxed border-l-4 border-primary-accent pl-6">
            {subtitle}
        </p>
        {cta_link && (
            <a href={cta_link} class="inline-flex items-center px-8 py-4 bg-primary-accent text-black text-lg font-bold hover:bg-white transition-colors uppercase tracking-widest group">
                {cta_text || "Explore"}
                <span class="ml-2 group-hover:translate-x-1 transition-transform">â†’</span>
            </a>
        )}
    </div>
</div>
